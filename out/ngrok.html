<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ServerTool</title>
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/ngrok.css">
  <link rel="stylesheet" href="../node_modules/bootstrap/dist/css/bootstrap.min.css">
  <script src="../node_modules/bootstrap/dist/js/bootstrap.bundle.js"></script>
</head>
<body>
  <div class="container">
    <nav class="d-flex flex-wrap align-items-center justify-content-center justify-content-md-between p-3 mb-3 border-bottom">
      <div class="d-flex align-items-center col-md-3 mb-2 mb-md-0 text-dark text-decoration-none">
        <img src="img/icon.png" width="48" height="48">
      </div>
  
      <ul class="nav col-12 col-md-auto mb-2 justify-content-center mb-md-0">
        <li><a class="nav-link px-2 link-secondary webundrag" href="select.html">Home</a></li>
        <li><a class="nav-link px-2 link-dark webundrag" href="ngrok.html">Ngrok</a></li>
        <li><a class="nav-link px-2 link-secondary webundrag" href="terminal.html">Terminal</a></li>
      </ul>

      <div class="col-md-3 text-end webundrag">
        <img src="img/svg/dash-square.svg" id="min">
        <img src="img/svg/square.svg" id="full">
        <img src="img/svg/x-circle.svg" id="close">
      </div>
    </nav>
  </div>

  <div class="webundrag">
    <div class="main">
      <div class="container">
        <div class="border theborder" id="ngrokbox" style="opacity: 0;">
          <div class="choosebox">
            <input type="text" placeholder="Local Path" class="inputchoose border" id="localpath">
            <button class="buttonchoose border theborder" id="pathbutton">Choose</button>
          </div>
          <div class="choosebox">
            <div style="display: inline-block;margin: 10px;">
              <img src="img/svg/spin.svg" id="img0" width="16" height="16" style="opacity: 0;">
              <label id="label0"></label>
            </div>
            <button type="button" class="btn btn-primary" id="ngrokfolder">Setup</button>
          </div>
        </div>

        <div class="border theborder" id="ngrokdisplay" style="opacity: 0;">
          <!-- <div id="mainboxngrok0" style="display: flex; place-content: center space-between; padding: 1rem;">
            <img src="img/svg/start.svg" alt="Start" id="ngrokstart0" style="margin-right: 5px;">
            <img src="img/svg/stop.svg" alt="Stop" id="ngrokstop0"></div>
            <label id="labelngrok0">Port: 25565</label>
            <label id="ipngrok0"></label>
            <label id="statusngrok0">Status: Stop</label>
            <img src="img/svg/eject.svg" alt="Remove" id="ngrokremove0" style="margin-right: 5px; opacity: 0;">
            <script>
              const { ngrokChannel } = require("./pipe/ngrok")
              let url0 = null
              let isruning0 = false
              const ipngrok0 = document.getElementById("ipngrok0")
              const statusngrok0 = document.getElementById("statusngrok0")
              const ngrokstart0 = document.getElementById("ngrokstart0")
              const ngrokstop0 = document.getElementById("ngrokstop0")
              ngrokstart0.addEventListener("mouseenter", () => {
                ngrokstart0.src = "img/svg/start-fill.svg"
              })
              ngrokstart0.addEventListener("mouseout", () => {
                ngrokstart0.src = "img/svg/start.svg"
              })
              ngrokstart0.addEventListener("click", () => {
                if (global.ngrokReady && !isruning0) {
                  const ngrokconfig0 = {
                    "authtoken": global.ngrokToken,
                    "proto": "tcp",
                    "addr": "25565",
                  }
                  if (global.ngrokRegion !== "default") ngrokconfig0.region = global.ngrokRegion
                  ipcRenderer.send(ngrokChannel.START, ngrokconfig0)
                  ipcRenderer.on("post:ngrokurl0", (event, message) => {
                    url0 = String(message)
                    ipngrok0.innerText = url0.replace("tcp://", "")
                    statusngrok0.innerText = "Status: Running"
                    isruning0 = true
                  })
                }
              })
              ngrokstop0.addEventListener("mouseenter", () => {
                ngrokstop0.src = "img/svg/stop-fill.svg"
              })
              ngrokstop0.addEventListener("mouseout", () => {
                ngrokstop0.src = "img/svg/stop.svg"
              })
              ngrokstop0.addEventListener("click", () => {
                if (isruning0 && global.ngrokReady) {
                  ipcRenderer.send("post:ngrokkill", {"id": 0, "url": url0})
                  ipcRenderer.on("post:ngrokkill0", (event, message) => {
                    ipngrok0.innerText = ""
                    statusngrok0.innerText = "Status: Stop"
                    isruning0 = false
                  })
                }
              })
              ipngrok0.addEventListener("click", () => {
                if (global.ngrokReady && isruning0) {
                  navigator.clipboard.writeText(String(url0).replace("tcp://", ""))
                  global.sweet2.fire({
                    icon: "success",
                    text: "Copy to clipboard!",
                    showClass: {
                      popup: 'animate__animated animate__fadeInDown'
                    },
                    hideClass: {
                      popup: 'animate__animated animate__fadeOutUp'
                    }
                  })
                }
              })
            </script>
          </div> -->
        </div>
      </div>
    </div>
  </div>
  
  <div class="top"></div>
  <div class="footer-color mt-auto py-3">
    <div class="col-md-12 text-center"></div>
  </div>
  <footer class="footer mt-auto py-3">
    <div class="center">
      <p>Powered by ngrok</p>
      <p>Open Source</p>
      Designed by XyZerKunG
    </div>
  </footer>
  <script>
    require("./js/handler.js")
    require("./js/ngrok.js")
  </script>
</body>
</html>